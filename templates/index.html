<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mus Doce Más - Juega Mus en Línea</title>
    <link rel="stylesheet" href="../static/css/styles.css">
    <style>
        .register-container img {
            margin-bottom: 20px;
            width: 100px;
            border-radius: 50%;
            border: 2px solid #fff;
        }
/* Estilo para mover la "X" a la esquina superior derecha */

.modal {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.7); /* Fondo oscuro con transparencia */
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 10px;
}

.modal-content {
    background-color: #fefefe;
    padding: 30px;
    border-radius: 10px;
    width: 90vw; /* Adapta la anchura al 90% del viewport */
    max-width: 900px; /* Máximo 900px */
    max-height: 90vh; /* Ajusta la altura máxima al 90% del viewport */
    overflow-y: auto; /* Añade scroll si el contenido excede */
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    position: relative; /* Hace que la "X" sea relativa al contenido */
}

.close {
    position: absolute;
    top: 10px; /* Ajusta la posición superior */
    right: 15px; /* Ajusta la posición lateral */
    color: #aaa;
    font-size: 24px;
    font-weight: bold;
    cursor: pointer;
    z-index: 10;
}

.close:hover,
.close:focus {
    color: black;
    text-decoration: none;
}

.titulo-noticia {
    color: #e63946; /* Rojo intenso */
    font-size: 36px;
    font-weight: bold;
    text-align: center;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(-20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.modal-content {
    animation: fadeIn 0.5s ease;
}

        .cookie-banner {
            position: fixed;
            bottom: 0;
            width: 100%;
            background: rgba(0, 0, 0, 0.85);
            color: white;
            text-align: center;
            padding: 15px;
            display: none;
        }
        .cookie-banner a {
            color: #f1c40f;
            text-decoration: underline;
        }
        .cookie-banner button {
            margin: 5px;
            padding: 10px 20px;
            border: none;
            cursor: pointer;
        }
        #accept-cookies {
            background-color: #28a745;
            color: white;
        }
        #reject-cookies {
            background-color: #dc3545;
            color: white;
        }

    </style>	
</head>
<body>
    <!-- Encabezado con logo e ítems de navegación -->
    <header>
		<div style="display: flex; align-items: center;">
			<img src="../static/img/logomus.png" alt="Logo de Mus 12 Más" onclick="window.location.href='/'" style="width: 50px; margin-right: 10px;">
			<h1 style="margin: 0;">Doce Más</h1>
		</div>

        <nav>
            <ul>
                <li><a href="{{url_for('reglas')}}" class="btn btn-success">Reglas del Mus</a></li>
                <li><a href="{{url_for('ranking')}}" class="btn btn-success">Ranking</a></li>
                <li><a href="{{url_for('cultura')}}" class="btn btn-success">Cultura de Mus</a></li>
                <li><a href="{{url_for('iniciosesion')}}" class="btn btn-success">Iniciar Sesión</a></li>
                <li><a href="{{url_for('registrarse')}}" class="btn btn-success">Registrarse</a></li>	
            </ul>
        </nav>
    </header>
	
	    <!-- Banner de Cookies -->
    <div id="cookie-banner" class="cookie-banner">
        <p>Utilizamos cookies para mejorar tu experiencia. <a href="{{url_for('politicacookies')}}" target="_blank">Más información</a></p>
        <button id="accept-cookies">Aceptar</button>
        <button id="reject-cookies">Rechazar</button>
    </div>

    <!-- Sección principal con bienvenida e introducción -->
    <main>
        <section class="intro">
            <h2>Bienvenido a Mus ¡¡Doce Más!!</h2>
            <p>Únete a la comunidad de jugadores de Mus. Juega con amigos o compite contra jugadores de todo el mundo.</p>
            <a href="{{url_for('registrarse')}}" class="cta-button">Regístrate si es la primera vez que entras</a>
        </section>
        <section id="noticias" class="section">
            <h3>Noticia destacada</h3>
			<p>Después de mucho trabajo, noches sin dormir y alguna que otra partida de mus entre líneas de código...</p>
            <button id="openModal" class="secondary-button">Leer noticia</button>
            <!--<a href="{{url_for('noticias')}}" class="secondary-button">Ver noticias</a>-->
			<div id="modalContainer"></div>
        </section>
        <!-- Sección de reglas y tutorial -->
        <section id="reglas" class="section">
            <h3>Reglas del Mus</h3>
            <p>El Mus es un juego de cartas tradicional que se juega en parejas. Aprende las reglas básicas y empieza a competir.</p>
            <a href="{{url_for('reglas')}}" class="secondary-button">Ver más</a>
        </section>
        <!-- Sección de cultura y frases -->
        <section id="reglas" class="section">
            <h3>Cultura del Mus</h3>
            <p>El mus es un juego de cartas con raíces en el País Vasco. Su origen exacto es incierto, pero se cree que comenzó ... </p>
            <a href="{{url_for('cultura')}}" class="secondary-button">Ver más</a>
        </section>
        <!-- Ranking de jugadores -->
        <section id="ranking" class="section">
            <h3>Clasificación Global</h3>
            <p>Descubre quiénes son los mejores jugadores y compite para alcanzar el primer lugar en el ranking.</p>
            <a href="{{url_for('ranking')}}" class="secondary-button">Ver clasificación</a>
        </section>
    </main>
	
	<script>
		//const socket = io.connect(); // Conexión al servidor

		document.addEventListener("DOMContentLoaded", function() {
			// Verificar si el usuario ha aceptado las cookies previamente
			if (localStorage.getItem("cookiesAccepted") === "true") {
				console.log("El usuario ya aceptó las cookies. No se muestra el banner.");
			} else {
				document.getElementById("cookie-banner").style.display = "block";
			}
			// Para borrar la preferencia en localstore, desde la consola: localStorage.removeItem("cookiesAccepted");
			// Evento para aceptar cookies
			document.getElementById("accept-cookies").addEventListener("click", function() {
				localStorage.setItem("cookiesAccepted", "true");
				document.getElementById("cookie-banner").style.display = "none";
			});

			// Evento para rechazar cookies
			document.getElementById("reject-cookies").addEventListener("click", function() {
				localStorage.setItem("cookiesAccepted", "false");
				document.getElementById("cookie-banner").style.display = "none";
			});
		});
				
		document.getElementById("openModal").onclick = function() {
			fetch("/noticias")
			.then(response => response.text())
			.then(data => {
				document.getElementById("modalContainer").innerHTML = data;
				var modal = document.getElementById("myModal");
				modal.style.display = "block";

				var closeBtn = modal.querySelector(".close");
				closeBtn.onclick = function() {
					modal.style.display = "none";
				};

				window.onclick = function(event) {
					if (event.target == modal) {
						modal.style.display = "none";
					}
				};
			});
		}

		function loadPrivacyModal() {
			fetch("/politicaprivacidad")
				.then(response => response.text())
				.then(data => {
					// Inserta el contenido del modal en la página
					var modalContainer = document.createElement("div");
					modalContainer.innerHTML = data;
					document.body.appendChild(modalContainer);

					// Obtiene el modal y lo muestra
					var modalPrivacy = document.getElementById("myModalPrivacy");
					modalPrivacy.style.display = "block";

					// Configura el botón de cierre
					var closePrivacy = modalPrivacy.querySelector(".close");
					closePrivacy.onclick = function() {
						modalPrivacy.style.display = "none";
					};

					// Cierra el modal si se hace clic fuera de él
					window.onclick = function(event) {
						if (event.target == modalPrivacy) {
							modalPrivacy.style.display = "none";
						}
					};
				});
		}

		function loadServicioModal() {
			fetch("/terminosservicio")
				.then(response => response.text())
				.then(data => {
					// Inserta el contenido del modal en la página
					var modalContainer = document.createElement("div");
					modalContainer.innerHTML = data;
					document.body.appendChild(modalContainer);

					// Obtiene el modal y lo muestra
					var myModalTerms = document.getElementById("myModalTerms");
					myModalTerms.style.display = "block";

					// Configura el botón de cierre
					var closeTerms = myModalTerms.querySelector(".close");
					closeTerms.onclick = function() {
						myModalTerms.style.display = "none";
					};

					// Cierra el modal si se hace clic fuera de él
					window.onclick = function(event) {
						if (event.target == myModalTerms) {
							myModalTerms.style.display = "none";
						}
					};
				});
		}
		function contactar() {
			const username = document.querySelector('[data-name="txtAlias"]').textContent;
			socket.emit('contactar', { username });
			alert('Evento de enviar email lanzado para ' + username);
		}

		function cerrarSesion() {
			// Redirige al usuario a la ruta del backend que cierra sesión
			window.location.href = "/logout";
		}
			
	</script>
    <!-- Pie de página con enlaces adicionales -->
    <footer>
        <p>&copy; 2025 Pablo Nieto. Todos los derechos reservados.</p>
        <nav class="footer-nav">
			<a href="{{ url_for('contactar') }}">Contacto</a> |
            <a href="#" onclick="loadPrivacyModal()">Política de Privacidad</a> |
            <a href="#" onclick="loadServicioModal()">Términos de Servicio</a>
        </nav>
    </footer>
	

</body>
</html>